<!DOCTYPE html>
{% load static %}
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>The White Meat Company</title>
  <link rel="icon" type="image/svg+xml" href="{% static 'images/logo.svg' %}" />
  <link rel="stylesheet" href="{% static 'css/style.css' %}" />

  <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet" />
</head>
<body>
  <!-- Navbar -->
  <nav class="navbar">
    <div class="logo">
      <img src="{% static 'images/logo.svg' %}" alt="The White Meat Company Logo" />
    </div>
<button class="navbar-hamburger" id="navbar-hamburger" aria-label="Open menu" style="background:none; border:none; cursor:pointer; padding:8px; margin-left:auto;">
      <span style="display:block; width:28px; height:3px; background:#2d6a4f; margin:6px 0; border-radius:2px;"></span>
      <span style="display:block; width:28px; height:3px; background:#2d6a4f; margin:6px 0; border-radius:2px;"></span>
      <span style="display:block; width:28px; height:3px; background:#2d6a4f; margin:6px 0; border-radius:2px;"></span>
    </button>
    
    <ul class="nav-links" id="nav-links">
      <li><a href="{% url 'index' %}">Home</a></li>
      <li><a href="{% url 'masterclass' %}">Masterclass Training</a></li>
      <li><a href="{% url 'cages' %}" class="active">Cages+Accessories</a></li>
      <li><a href="{% url 'breeding' %}">Breeding Stock</a></li>
      <li><a href="{% url 'rabbithole' %}">Rabbit Hole</a></li>
    </ul>
  </nav>

  <!-- Cages Hero Section -->
  <section class="cages-hero" data-aos="fade-in" data-aos-duration="1000">
    <div class="overlay"></div>
    <div class="hero-content">
      <h1 data-aos="fade-down" data-aos-delay="300" data-aos-duration="800">Premium Rabbit Cages & Equipment</h1>
      <p data-aos="fade-up" data-aos-delay="500" data-aos-duration="800">
        Industry-leading galvanized steel cages with complete feeding and waste management systems.
        Professional-grade equipment designed for maximum productivity and animal welfare.
      </p>
      <a href="#equipment" class="btn green" data-aos="zoom-in" data-aos-delay="700" data-aos-duration="800">View Products</a>
    </div>
  </section>

  <!-- Equipment Info Section -->
  <section class="equipment-section">
    <div class="container">
      <div class="equipment-header">
        <h2>Industry Leaders in Rabbit Farming Equipment</h2>
        <p>The White Meat Company provides premium breeding stock and professional-grade equipment in Zimbabwe</p>
      </div>

      <div class="equipment-content">
        <div class="equipment-text">
          <h3>Complete Farming Solutions</h3>
          <p>
            Our steel galvanized cages come complete with water drinkers, feeding troughs, and an advanced manure & urine
            collection system – everything you need to start your professional rabbit farming operation.
          </p>
          <p>
            Designed for optimal animal welfare and maximum productivity, our cages feature innovative drainage systems
            and durable construction that withstands Zimbabwe’s climate conditions.
          </p>

          <div class="highlight-box">
            <div class="icon">
              <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#2d6a4f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 9l6 6 6-6"/>
                <path d="M12 3v9"/>
                <circle cx="12" cy="12" r="3"/>
              </svg>
            </div>
            <div class="highlight-text">
              <strong>Professional Grade Equipment</strong>
              <p>Trusted by commercial farmers across Zimbabwe for durability, efficiency, and outstanding animal care standards.</p>
            </div>
          </div>
        </div>

        <div class="equipment-image">
          <img src="{% static 'images/cage2.jpg' %}" alt="Rabbit cage with dimensions">
        </div>
      </div>
    </div>
  </section>

  <!-- Cage Products Section -->
  <section id="equipment" class="cage-section">
    <div class="container">
      <div class="cage-header">
        <h2>Our Premium Cage Systems</h2>
        <p>Professional-grade galvanized steel cages designed for commercial rabbit farming success</p>
      </div>

      <div class="cage-grid">
        <!-- Breeders Cage Card -->
        <div class="cage-card">
          <div class="cage-image">
            <img src="{% static 'images/cage3.jpg' %}" alt="12Sdx Breeders Cage">
            <span class="cage-tag breeders">BREEDERS</span>
          </div>
          <div class="cage-body">
            <h3>12Sdx Breeders Cage</h3>
            <p>Professional breeding system with 12 compartments designed to house 1 buck and 11 does for optimal breeding efficiency.</p>
            <div class="price-order">
              <span class="price">$<strong>455</strong></span>
             
              <button class="cart-btn" onclick="addToCart('12Sdx Breeders Cage', 455, '{% static 'images/cage3.jpg' %}')" style="background:#2d6a4f; color:#fff; border:none; border-radius:22px; padding:7px 18px; font-size:0.98rem; font-weight:600; box-shadow:0 2px 8px rgba(45,106,79,0.08); cursor:pointer; transition:background 0.18s, transform 0.13s, box-shadow 0.18s; letter-spacing:0.2px; outline:none; position:relative; overflow:hidden;">Add to Cart</button>
              <button class="details-btn" onclick="showDetails('breeders')" style="background:#2d6a4f; color:#fff; border:none; border-radius:22px; padding:7px 18px; font-size:0.98rem; font-weight:600; box-shadow:0 2px 8px rgba(45,106,79,0.08); cursor:pointer; transition:background 0.18s, transform 0.13s, box-shadow 0.18s; letter-spacing:0.2px; outline:none; position:relative; overflow:hidden;">View Details</button>
            </div>
          </div>
        </div>

        <!-- Weaners Cage Card -->
        <div class="cage-card">
          <div class="cage-image">
            <img src="{% static 'images/cage4.jpg' %}" alt="6Sdx Weaners Cage">
            <span class="cage-tag weaners">WEANERS</span>
          </div>
          <div class="cage-body">
            <h3>6Sdx Weaners Cage</h3>
            <p>High-capacity weaning system with 6 compartments designed to house up to 90 weaners for efficient growth management.</p>
            <div class="price-order">
              <span class="price">$<strong>455</strong></span>
             
              <button class="cart-btn" onclick="addToCart('6Sdx Weaners Cage', 455, '{% static 'images/cage4.jpg' %}')" style="background:#2d6a4f; color:#fff; border:none; border-radius:22px; padding:7px 18px; font-size:0.98rem; font-weight:600; box-shadow:0 2px 8px rgba(45,106,79,0.08); cursor:pointer; transition:background 0.18s, transform 0.13s, box-shadow 0.18s; letter-spacing:0.2px; outline:none; position:relative; overflow:hidden;">Add to Cart</button>
              <button class="details-btn" onclick="showDetails('weaners')" style="background:#2d6a4f; color:#fff; border:none; border-radius:22px; padding:7px 18px; font-size:0.98rem; font-weight:600; box-shadow:0 2px 8px rgba(45,106,79,0.08); cursor:pointer; transition:background 0.18s, transform 0.13s, box-shadow 0.18s; letter-spacing:0.2px; outline:none; position:relative; overflow:hidden;">View Details</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Accessories Section (unchanged layout) -->
  <!-- Accessories Section -->
<section class="accessories-section" style="padding: 70px 0; background: #f8f8f8;">
  <div class="container" style="display: flex; flex-direction: column; align-items: center;">
    <div class="accessories-header" style="text-align: center; margin-bottom: 38px;">
      <h2 class="cage-header-title" style="margin-bottom: 12px; font-size: 2rem; font-weight: 700; color:#2d2d2d;">
        Other Accessories
      </h2>
      <p class="cage-header-desc" style="max-width: 750px; margin: 0 auto; color:#555; font-size: 1.05rem; line-height:1.6;">
        Browse additional equipment and accessories to enhance your rabbit farming operation. 
      </p>
    </div>

    <div id="accessories-list" class="accessories-grid"
         style="display: flex; flex-wrap: wrap; gap: 32px; justify-content: center; text-align: center;">
      {% if accessories %}
        {% for accessory in accessories %}
        <div class="cage-card" style="width:300px; height:400px; min-width:240px; max-width:360px; display:flex; flex-direction:column; justify-content:space-between; background:#fff; border-radius:14px; box-shadow:0 2px 10px rgba(0,0,0,0.05); padding:10px;">
          <div class="cage-image">
            <div style="width:100%; height:220px; display:flex; align-items:center; justify-content:center; background:#f3f3f3; border-radius:12px; overflow:hidden;">
              <img src="{{ accessory.image_url }}" alt="{{ accessory.name }}" style="width:100%; height:100%; object-fit:cover;">
            </div>
          </div>
          <div class="cage-body" style="padding:10px;">
            <h3 style="font-size:1.15rem; margin:12px 0 6px; color:#2d2d2d;">{{ accessory.name }}</h3>
            <p style="font-size:0.95rem; color:#555; margin-bottom:12px;">{{ accessory.description|truncatewords:22 }}</p>
            <div class="price-order" style="display:flex; justify-content:space-between; align-items:center;">
              <span class="price" style="font-size:1rem; color:#2d6a4f;">$<strong>{{ accessory.price }}</strong></span>
              <button class="cart-btn"
                      onclick="addToCart('{{ accessory.name|escapejs }}', {{ accessory.price }}, '{{ accessory.image_url }}')"
                      style="background:#2d6a4f; color:#fff; border:none; border-radius:18px; padding:6px 14px; font-size:0.85rem; font-weight:600; cursor:pointer; transition:background 0.2s;">
                Add
              </button>
            </div>
          </div>
        </div>
        {% endfor %}
      {% else %}
        <div style="color:#888; font-size:1.1rem; padding:32px 0; width:100%; text-align:center;">
          No accessories available at the moment.
        </div>
      {% endif %}
    </div>
  </div>
</section>

  <!-- Delivery Section -->
  <section class="delivery-section">
    <div class="container">
      <div class="delivery-content">
        <div class="delivery-icon">
          <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#2d6a4f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <rect x="1" y="3" width="15" height="13"/>
            <polygon points="16,8 20,8 23,11 23,16 16,16"/>
            <circle cx="5.5" cy="18.5" r="2.5"/>
            <circle cx="18.5" cy="18.5" r="2.5"/>
          </svg>
        </div>
        <h2>Delivery & Installation</h2>
        <p>Professional delivery and setup services available throughout Zimbabwe. Our team ensures proper installation and provides operational training.</p>
        <div class="delivery-features">
          <div class="delivery-feature">
            <h4>Nationwide Delivery</h4>
            <p>Delivery services to all major cities in Zimbabwe</p>
          </div>
          <div class="delivery-feature">
            <h4>Professional Installation</h4>
            <p>Expert setup and testing of all equipment systems</p>
          </div>
          <div class="delivery-feature">
            <h4>Training & Support</h4>
            <p>Comprehensive training on equipment operation and maintenance</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Footer -->
  <footer class="footer-section animate-on-scroll fade-in">
    <div class="footer-content">
      <div class="footer-col company">
        <h3>The White Meat Company</h3>
        <p>Industry leaders in the provision of rabbit farming equipment and prime breeding stock in Zimbabwe. 
</p>
      </div>
      <div class="footer-col links">
        <h4>Quick Links</h4>
        <ul>
          <li><a href="{% url 'masterclass' %}">Masterclass Training</a></li>
          <li><a href="{% url 'cages' %}">Cages+Accessories</a></li>
          <li><a href="{% url 'breeding' %}">Breeding Stock</a></li>
          <li><a href="{% url 'rabbithole' %}">Rabbit Hole</a></li>
        
        </ul>
      </div>
      <div class="footer-col contact">
        <h4>Contact Info</h4>
        <p>Belvedere, Harare<br />Zimbabwe<br />+263 772 333 369<br /> +263 779 521 665<br/>info@whitemeatcompany.zw</p>
        <div style="margin-top: 20px;">
          <a href="{% url 'login' %}" style="color: #2d6a4f; font-weight: bold; text-decoration: none; font-size: 16px;">LOGIN</a>
        </div>
      </div>
    </div>
    <hr class="footer-divider" />
    <div class="footer-bottom">
      &copy; 2025 The White Meat Company. All rights reserved.
    </div>
  </footer>

  <!-- Cart Sidebar -->
  <div id="cart-sidebar" style="position:fixed; top:80px; right:30px; width:340px; max-width:95vw; background:#fff; box-shadow:0 4px 24px rgba(0,0,0,0.13); border-radius:14px; z-index:9999; padding:28px 22px 22px 22px; display:none; flex-direction:column; gap:18px;">
    <h3 style="margin:0 0 10px 0; font-size:1.3rem; font-weight:700; color:#2d6a4f; text-align:center;">Your Cart</h3>
    <div id="cart-items-list" style="min-height:60px; margin-bottom:10px;"></div>
    <div style="display:flex; justify-content:space-between; align-items:center; font-size:1.1rem; font-weight:600; margin-bottom:10px;">
      <span>Total:</span>
      <span id="cart-total" style="color:#2d6a4f;">$0.00</span>
    </div>
    <button id="order-btn" style="background:#2d6a4f; color:#fff; border:none; border-radius:7px; padding:12px 0; font-size:1.08rem; font-weight:600; cursor:pointer; transition:background 0.18s;">Place Order</button>
    <!-- Paynow button removed -->
    <button onclick="toggleCart(false)" style="background:none; border:none; color:#888; font-size:1.2rem; margin-top:2px; cursor:pointer;">Close</button>
  </div>

  <!-- Floating Cart Button -->
  <button id="open-cart-btn" onclick="toggleCart(true)" style="position:fixed; bottom:32px; right:32px; z-index:9998; background:#2d6a4f; color:#fff; border:none; border-radius:50%; width:60px; height:60px; font-size:2rem; box-shadow:0 2px 10px rgba(0,0,0,0.13); cursor:pointer; display:none; align-items:center; justify-content:center;">
    🛒<span id="cart-count-badge" style="position:absolute; top:10px; right:10px; background:#e74c3c; color:#fff; border-radius:50%; width:22px; height:22px; font-size:1rem; display:none; align-items:center; justify-content:center; font-weight:700;">0</span>
  </button>

  <!-- View Details Modal -->
  <div id="detailsModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); align-items:center; justify-content:center; z-index:10000;">
    <div style="background:#fff; padding:24px; border-radius:8px; max-width:500px; width:90%; position:relative;">
      <button onclick="closeDetails()" style="position:absolute; top:8px; right:12px; background:none; border:none; font-size:1.5rem; cursor:pointer;">&times;</button>
      <div id="modalDetailsContent"></div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
  <script>AOS.init();</script>

  <script>
    // Navbar hamburger toggle for mobile
    document.addEventListener('DOMContentLoaded', function() {
      var hamburger = document.getElementById('navbar-hamburger');
      var navLinks = document.getElementById('nav-links');
      if (hamburger && navLinks) {
        hamburger.addEventListener('click', function() {
          navLinks.classList.toggle('open');
        });
        // Hide nav links when resizing to tablet/desktop
        window.addEventListener('resize', function() {
          if (window.innerWidth > 600) {
            navLinks.classList.remove('open');
          }
        });
      }
    });
  </script>

  <script>
    let cart = [];

    function addToCart(name, price, img) {
      cart.push({ name, price, img });
      updateCartDisplay();
      document.getElementById('open-cart-btn').style.display = 'flex';
    }

    function removeFromCart(idx) {
      cart.splice(idx, 1);
      updateCartDisplay();
      if (cart.length === 0) document.getElementById('open-cart-btn').style.display = 'none';
    }

    function updateCartDisplay() {
      const cartList = document.getElementById('cart-items-list');
      const cartTotal = document.getElementById('cart-total');
      const cartBadge = document.getElementById('cart-count-badge');

      if (!cartList || !cartTotal || !cartBadge) return;

      if (cart.length === 0) {
        cartList.innerHTML = '<p style="text-align:center;color:#888;">Your cart is empty</p>';
        cartTotal.textContent = '$0.00';
        cartBadge.style.display = 'none';
        cartBadge.textContent = '0';
        return;
      }

      cartBadge.style.display = 'flex';
      cartBadge.textContent = cart.length;

      const grouped = {};
      cart.forEach(item => {
        const key = item.name + '|' + item.price;
        if (!grouped[key]) grouped[key] = { ...item, qty: 1, total: item.price };
        else { grouped[key].qty += 1; grouped[key].total += item.price; }
      });

      let html = '';
      let total = 0;
      Object.values(grouped).forEach((item, idx) => {
        html += `<div style="display:flex;justify-content:space-between;margin-bottom:10px;">
          <div><strong>${item.name}</strong><br><span>$${item.price} × ${item.qty}</span></div>
          <div><span style="margin-right:8px;">$${item.total}</span>
          <button onclick="removeFromCart(${idx})" style="background:none;border:none;font-size:1.2rem;color:#e74c3c;cursor:pointer;">×</button></div>
        </div>`;
        total += item.total;
      });

      cartList.innerHTML = html;
      cartTotal.textContent = `$${total.toFixed(2)}`;
    }


    function toggleCart(show) {
      document.getElementById('cart-sidebar').style.display = show ? 'flex' : 'none';
    }

    // WhatsApp order integration for cart sidebar
    document.addEventListener('DOMContentLoaded', function() {
      var orderBtn = document.getElementById('order-btn');
      if (orderBtn) {
        orderBtn.addEventListener('click', function() {
          if (cart.length === 0) {
            alert('Your cart is empty!');
            return;
          }
          let message = 'Hello, I would like to place an order for the following items:%0A';
          const grouped = {};
          cart.forEach(item => {
            const key = item.name + '|' + item.price;
            if (!grouped[key]) grouped[key] = { ...item, qty: 1, total: item.price };
            else { grouped[key].qty += 1; grouped[key].total += item.price; }
          });
          Object.values(grouped).forEach(item => {
            message += `- ${item.name} ($${item.price} x ${item.qty}) = $${item.total}%0A`;
          });
          let total = Object.values(grouped).reduce((sum, item) => sum + item.total, 0);
          message += `%0ATotal: $${total.toFixed(2)}%0A`;
          message += 'Name: [Your Name Here]%0APlease contact me to confirm.';
          const whatsappURL = `https://wa.me/263772333369?text=${message}`;
          window.open(whatsappURL, '_blank');
        });
      }
    });

    function showDetails(type) {
      let html = '';
      if (type === 'breeders') {
        html = `
          <h2>12Sdx Breeders Cage</h2>
          <p>Professional breeding cage with 12 compartments: 1 buck + 11 does. Optimized for efficient breeding cycles and animal welfare.</p>
          <img src="{% static 'images/cage3.jpg' %}" alt="Breeders Cage" style="width:100%;margin-top:12px;border-radius:8px;">
        `;
      } else if (type === 'weaners') {
        html = `
          <h2>6Sdx Weaners Cage</h2>
          <p>Weaning system with 6 compartments to house up to 90 weaners, ensuring controlled growth and separation for health management.</p>
          <img src="{% static 'images/cage4.jpg' %}" alt="Weaners Cage" style="width:100%;margin-top:12px;border-radius:8px;">
        `;
      }
      document.getElementById('modalDetailsContent').innerHTML = html;
      document.getElementById('detailsModal').style.display = 'flex';
    }

    function closeDetails() {
      document.getElementById('detailsModal').style.display = 'none';
    }
  </script>

  <!-- Paynow payment integration removed -->
  </script>
</body>
</html>
