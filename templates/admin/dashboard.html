{% extends 'admin/base.html' %}

{% block title %}Admin Dashboard{% endblock %}
{% block page_title %}Welcome to Your Admin Dashboard{% endblock %}

{% block content %}
<!-- Welcome Message -->
<div class="welcome-section" data-aos="fade-down" data-aos-duration="800" style="background: linear-gradient(135deg, #2d6a4f 0%, #40916c 100%); border-radius: 15px; padding: 30px; color: white; margin-bottom: 30px; text-align: center;">
    <h1 style="margin: 0 0 10px 0; font-size: 2.2rem;">Welcome Back, {{ user.first_name|default:user.username }}!</h1>
    <p style="margin: 0; opacity: 0.9; font-size: 1.1rem;">Manage your restaurant content from this central dashboard</p>
</div>

<!-- Statistics Cards -->
<div class="stats-grid" data-aos="fade-up" data-aos-delay="200" data-aos-duration="800">
    <div class="stat-card">
        <div class="stat-icon" style="background: #667eea;"><i class="fas fa-store"></i></div>
        <div class="stat-content">
            <div class="stat-number">{{ stats.total_branches|default:0 }}</div>
            <div class="stat-label">Restaurant Branches</div>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon" style="background: #f093fb;"><i class="fas fa-utensils"></i></div>
        <div class="stat-content">
            <div class="stat-number">{{ stats.total_menu_items|default:0 }}</div>
            <div class="stat-label">Menu Items</div>
        </div>
    </div>
</div>

<!-- Quick Actions -->
<div class="card" data-aos="fade-up" data-aos-delay="400" data-aos-duration="800">
    <div class="card-header">
        <h2 class="card-title">Quick Actions</h2>
        <p style="color: #666; margin-top: 5px;">Manage your restaurant content efficiently</p>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <a href="{% url 'branch_selection' %}" class="action-card" style="text-decoration: none; color: inherit;">
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 10px; padding: 25px; color: white; text-align: center; transition: transform 0.3s ease;">
                <i class="fas fa-utensils" style="font-size: 2.5rem; margin-bottom: 15px;"></i>
                <h3 style="margin-bottom: 10px;">Manage Menus</h3>
                <p style="opacity: 0.9; font-size: 0.9rem;">Add and edit menu items for different branches</p>
            </div>
        </a>
        
        <a href="{% url 'index' %}" class="action-card" style="text-decoration: none; color: inherit;">
            <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); border-radius: 10px; padding: 25px; color: white; text-align: center; transition: transform 0.3s ease;">
                <i class="fas fa-external-link-alt" style="font-size: 2.5rem; margin-bottom: 15px;"></i>
                <h3 style="margin-bottom: 10px;">View Website</h3>
                <p style="opacity: 0.9; font-size: 0.9rem;">Visit the main website to see your changes</p>
            </div>
        </a>
    </div>
</div>

<!-- Restaurant Branches Overview -->
<div class="card" data-aos="fade-up" data-aos-delay="600" data-aos-duration="800">
    <div class="card-header">
        <h2 class="card-title">Restaurant Branches</h2>
    </div>
    
    {% if branches %}
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
        {% for branch in branches %}
        <div class="branch-overview" style="border: 1px solid #e3e6f0; border-radius: 10px; padding: 20px;">
            <h3 style="color: #2c3e50; margin-bottom: 10px;">{{ branch.name }}</h3>
            <p style="color: #666; margin-bottom: 15px; font-size: 0.9rem;">{{ branch.address }}</p>
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                <span style="color: #999; font-size: 0.8rem;">Menu Items</span>
                <span style="background: #e8f4fd; color: #2980b9; padding: 4px 10px; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">
                    {{ branch.menu_items.count }}
                </span>
            </div>
            
            <div style="display: flex; gap: 8px;">
                <a href="{% url 'branch_menu_items' branch.id %}" class="btn btn-primary" style="flex: 1; text-align: center; font-size: 0.85rem;">
                    <i class="fas fa-list"></i> View Menu
                </a>
                <a href="{% url 'add_menu_item' branch.id %}" class="btn btn-success" style="flex: 1; text-align: center; font-size: 0.85rem;">
                    <i class="fas fa-plus"></i> Add Item
                </a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 40px; color: #666;">
        <i class="fas fa-store" style="font-size: 3rem; margin-bottom: 20px; color: #ddd;"></i>
        <h3>No restaurant branches found</h3>
        <p>Run the setup script to create initial restaurant branches and categories.</p>
        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px; text-align: left;">
            <strong>To set up initial data:</strong><br>
            1. Run: <code>python manage.py makemigrations frontend</code><br>
            2. Run: <code>python manage.py migrate</code><br>
            3. Run: <code>python manage.py shell < setup_data.py</code>
        </div>
    </div>
    {% endif %}
</div>

<style>
.action-card:hover > div {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

code {
    background: #e9ecef;
    padding: 2px 6px;
    border-radius: 3px;
    font-family: monospace;
    color: #e83e8c;
}
</style>
{% endblock %}
